# Meat_Digitalization/pages/production.py
import streamlit as st
import pandas as pd
import numpy as np
from ui import get_text


def show_production_process(lang_choice):
    st.markdown("<div class='fade-in'>", unsafe_allow_html=True)

    # –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
    st.title(get_text("jaya_process_title", lang_choice))
    st.markdown(get_text("jaya_process_subtitle", lang_choice))

    st.markdown("---")

    # ==========================================================
    # 1. –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ï –°–•–ï–ú–´: –ñ–ê–Ø –ò –§–û–†–ú–û–í–ê–ù–ù–´–ï –ò–ó–î–ï–õ–ò–Ø
    # ==========================================================
    st.header("–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å—Ö–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞")

    tab_proc_zhaya, tab_proc_formed = st.tabs(["–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∂–∞—è", "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π"])

    # -----------------------------
    # –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∂–∞—è (–ø–æ —Ç–µ—Ö. –∫–∞—Ä—Ç–µ)
    # -----------------------------
    with tab_proc_zhaya:
        st.subheader("–û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –∂–∞—è")

        stages_zhaya = [
            ("–ü—Ä–∏—ë–º–∫–∞ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å—ã—Ä—å—è",
             "–û—Ö–ª–∞–∂–¥—ë–Ω–Ω–æ–µ –º—è—Å–æ –∂–∞—è t = 0‚Äì3¬∞–°, –æ—Ä–≥–∞–Ω–æ–ª–µ–ø—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å (—Ü–≤–µ—Ç, –∑–∞–ø–∞—Ö, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü–∏—è)."),
            ("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–∞—Å—Å–æ–ª–∞",
             "4,5 –ª –≤–æ–¥—ã + 250 –≥ NaCl + 0,8 –º–≥ NaNO‚ÇÇ, t ‚âà 16¬∞–°, —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ."),
            ("–®–ø—Ä–∏—Ü–µ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å–æ–ª–æ–º",
             "–ò–≥–ª—ã 50 –∏ 80 –º–º, —Ä–∞—Å—Å–æ–ª –¥–æ–ª–∂–µ–Ω –¥–æ—Ö–æ–¥–∏—Ç—å –¥–æ —Å–µ—Ä–µ–¥–∏–Ω—ã –∫—É—Å–∫–∞."),
            ("–ü–æ—Å–æ–ª –≤ —Ä–∞—Å—Å–æ–ª–µ",
             "–£–∫–ª–∞–¥–∫–∞ –∂–∞—è –≤ —Ä–∞—Å—Å–æ–ª –Ω–∞ 72 —á–∞—Å–∞ –ø—Ä–∏ t = 0‚Äì3¬∞–°, —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–∞—Å—Å—ã 1200‚Äì1250 –≥ –Ω–∞ 1000 –≥ –∂–∞—è."),
            ("–ú–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ",
             "–í–∞–∫—É—É–º–Ω–æ–µ –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–Ω–¥–µ—Ä–∞–π–∑–µ—Ä–æ–º –ø—Ä–∏ t = 0‚Äì3¬∞–°, –¥–∞–≤–ª–µ–Ω–∏–µ 0,4‚Äì0,5 (–¥–æ 0,9) –∫–≥/—Å–º¬≤, "
             "–∑–∞ 2 —á–∞—Å–∞ —É—Å—É—à–∫–∞ ‚âà 100 –≥ —Å 1250 –≥."),
            ("–§–æ—Ä–º–æ–≤–∞–Ω–∏–µ",
             "–û–±–≤—è–∑—ã–≤–∞–Ω–∏–µ —à–ø–∞–≥–∞—Ç–æ–º –¥–ª—è –ø—Ä–∏–¥–∞–Ω–∏—è –∫—Ä—É–≥–ª–æ–π –∏–ª–∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã, œÑ ‚âà 20 –º–∏–Ω."),
            ("–°—É—à–∫–∞ –≤ —Ç–µ—Ä–º–æ–∫–∞–º–µ—Ä–µ",
             "–°–µ—Ç–∫–∞, t = 45¬∞–°, œÑ = 20 –º–∏–Ω."),
            ("–û–±–∂–∞—Ä–∫–∞",
             "–í–æ–∑–¥—É—Ö 75‚Äì85¬∞–°, –≤–Ω—É—Ç—Ä–∏ –∫—É—Å–∫–∞ t ‚âà 60¬∞–°."),
            ("–í–∞—Ä–∫–∞ –ø–∞—Ä–æ–º",
             "t –≤ –∫–∞–º–µ—Ä–µ 88¬∞–° –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è t –≤–Ω—É—Ç—Ä–∏ –∂–∞—è 74¬∞–°."),
            ("–°—É—à–∫–∞/–æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ",
             "–í–∫–ª—é—á—ë–Ω–Ω—ã–π –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä, –æ–∫–æ–ª–æ 10 –º–∏–Ω."),
            ("–ö–æ–ø—á–µ–Ω–∏–µ",
             "–ö–æ–ø—Ç–∏–ª—å–Ω–∞—è —Ç–µ—Ä–º–æ–∫–∞–º–µ—Ä–∞, t –¥—ã–º–∞ 30‚Äì33¬∞–°, œÑ ‚âà 1,5 —á–∞—Å–∞."),
            ("–í—ã–¥–µ—Ä–∂–∫–∞",
             "–ñ–∞—è –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Ç–µ—Ä–º–æ–∫–∞–º–µ—Ä–µ —Å –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–≤–µ—Ä—å—é –µ—â—ë –æ–∫–æ–ª–æ 2 —á–∞—Å–æ–≤."),
            ("–û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –∏ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ",
             "–•–æ–ª–æ–¥–∏–ª—å–Ω–∞—è –∫–∞–º–µ—Ä–∞ t = 0‚Äì5¬∞–° –≤ —Ç–µ—á–µ–Ω–∏–µ 12 —á–∞—Å–æ–≤."),
            ("–£–ø–∞–∫–æ–≤–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ",
             "–í–∞–∫—É—É–º-—É–ø–∞–∫–æ–≤–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ t = 0‚Äì3¬∞–° –¥–æ 30 —Å—É—Ç–æ–∫, –ª–∏–±–æ –∑–∞–º–æ—Ä–æ–∑–∫–∞ ‚Äì16‚Ä¶‚Äì18¬∞–° –¥–æ 6 –º–µ—Å—è—Ü–µ–≤.")
        ]

        df_zhaya = pd.DataFrame(stages_zhaya, columns=["–≠—Ç–∞–ø", "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"])
        st.dataframe(df_zhaya.set_index("–≠—Ç–∞–ø"))

        st.info(
            "–ó–¥–µ—Å—å –ø–æ–∫–∞–∑–∞–Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∂–∞—è: –∫—Ä—É–ø–Ω—ã–π –∫—É—Å–æ–∫, –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Å–æ–ª, "
            "–≤–∞–∫—É—É–º–Ω–æ–µ –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–∞—è —Ç–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞, –∫–æ–ø—á–µ–Ω–∏–µ, –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ."
        )

    # -------------------------------------------
    # –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π (–∂–∞—è/–º—è—Å–æ)
    # -------------------------------------------
    with tab_proc_formed:
        st.subheader("–û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π")

        stages_formed = [
            ("–ü—Ä–∏—ë–º–∫–∞ —Å—ã—Ä—å—è",
             "–û—Ö–ª–∞–∂–¥—ë–Ω–Ω–æ–µ –º—è—Å–æ (–∫–æ–Ω–∏–Ω–∞, –≤–µ—Ä–±–ª—é–∂–∞—Ç–∏–Ω–∞) t ‚âà +2¬∞–°, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ç–∫–∞–Ω–∏."),
            ("–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º—è—Å–∞ –∏ –∂–∏—Ä–∞",
             "–ú—è—Å–æ –∫—É—Å–∫–∞–º–∏ 5‚Äì6 —Å–º, –∂–∏—Ä –≤ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ 1 : 0,1‚Äì0,2, –∫—É—Å–∫–∏ –∂–∏—Ä–∞ 1‚Äì2 —Å–º."),
            ("–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å–æ–ª–∞",
             "60‚Äì70 –≥ –ø–æ–≤–∞—Ä–µ–Ω–Ω–æ–π —Å–æ–ª–∏ + 10‚Äì12 –≥ –Ω–∏—Ç—Ä–∏—Ç–Ω–æ–π —Å–æ–ª–∏ + 5‚Äì10 –≥ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–∞ + 3% —ç–∫—Å—Ç—Ä–∞–∫—Ç –æ–±–ª–µ–ø–∏—Ö–∏ "
             "–Ω–∞ 1 –ª –≤–æ–¥—ã –ø—Ä–∏ t ‚âà 2¬∞–°."),
            ("–®–ø—Ä–∏—Ü–µ–≤–∞–Ω–∏–µ",
             "–ò–Ω—ä–µ–∫—Ü–∏—è —Ä–∞—Å—Å–æ–ª–∞ –¥–æ 70% –º–∞—Å—Å—ã –º—è—Å–∞ (–∏–≥–æ–ª—å—á–∞—Ç—ã–π —à–ø—Ä–∏—Ü, –¥–∞–≤–ª–µ–Ω–∏–µ –æ–∫–æ–ª–æ 2 –±–∞—Ä)."),
            ("–í–∞–∫—É—É–º–Ω–æ–µ –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ",
             "–û–∫–æ–ª–æ 6 —á–∞—Å–æ–≤ –ø—Ä–∏ t = 2‚Äì4¬∞–° –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞—Å—Å–æ–ª–∞ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–ª–∫–æ–≤–æ–π –ø–ª—ë–Ω–∫–∏."),
            ("–§–æ—Ä–º–æ–≤–∞–Ω–∏–µ",
             "–£–∫–ª–∞–¥–∫–∞ –≤ —Ñ–æ—Ä–º—ã (–±–∞—Ç–æ–Ω—ã/–∫—Ä—É–≥–ª—ã–µ —Ñ–æ—Ä–º—ã), –ø—Ä–µ—Å—Å–æ–≤–∞–Ω–∏–µ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞."),
            ("–¢–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ (–≤–∞—Ä–∫–∞ –ø–∞—Ä–æ–º)",
             "t ‚âà 80¬∞–°, 70‚Äì90 –º–∏–Ω—É—Ç, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π t –Ω–µ –Ω–∏–∂–µ 73‚Äì74¬∞–°."),
            ("–°—É—à–∫–∞",
             "–ü–æ—Å–ª–µ –≤–∞—Ä–∫–∏: t ‚âà 60¬∞–°, 10‚Äì15 –º–∏–Ω—É—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–∞."),
            ("–ö–æ–ø—á–µ–Ω–∏–µ",
             "t ‚âà 60¬∞–°, 20 –º–∏–Ω—É—Ç, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —â–µ–ø—ã –ª–∏—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ—Ä–æ–¥."),
            ("–û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ",
             "–ë—ã—Å—Ç—Ä–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –¥–æ +4¬∞–° –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ –±–æ–ª–µ–µ 1 —á–∞—Å–∞."),
            ("–£–ø–∞–∫–æ–≤–∫–∞ –∏ –≤–∞–∫—É—É–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
             "–í–∞–∫—É—É–º–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ –≤ –±–∞—Ä—å–µ—Ä–Ω—É—é –ø–ª—ë–Ω–∫—É —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–æ—Å—Ç–∞–≤–∞ –∏ —Å—Ä–æ–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç–∏."),
            ("–•—Ä–∞–Ω–µ–Ω–∏–µ",
             "t = 0‚Äì4¬∞–° –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–æ–∫–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è.")
        ]

        df_formed = pd.DataFrame(stages_formed, columns=["–≠—Ç–∞–ø", "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"])
        st.dataframe(df_formed.set_index("–≠—Ç–∞–ø"))

        st.info(
            "–§–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –∂–∞—è —Ç–µ–º, —á—Ç–æ –∏–º–µ—é—Ç –º–µ–Ω—å—à—É—é —Ç–æ–ª—â–∏–Ω—É, –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–ª—å—á–µ–Ω—ã "
            "–∏–ª–∏ —Ñ–æ—Ä–º–æ–≤–∞–Ω—ã –≤ –±–∞—Ç–æ–Ω—ã, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–æ–ª–µ–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–µ –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫—É—é —Å—É—à–∫—É."
        )

    st.markdown("---")

    # ==========================================================
    # 2. –ú–û–î–ï–õ–ò –î–õ–Ø –ñ–ê–Ø –ò –§–û–†–ú–û–í–ê–ù–ù–´–• –ò–ó–î–ï–õ–ò–ô (–ì–õ–ê–í–ù–´–ô –ë–õ–û–ö)
    # ==========================================================
    st.header("–ú–æ–¥–µ–ª–∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ –∂–∞—è –∏ —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è")

    st.markdown(
        """
        –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ **–µ–¥–∏–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏**, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ü–∏–∏:

        - **—Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è –∂–∞—è** ‚Äî –∫—Ä—É–ø–Ω—ã–π –∫—É—Å–æ–∫, –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Å–æ–ª –∏ —Å—É—à–∫–∞;
        - **—Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è** ‚Äî –±–∞—Ç–æ–Ω—ã/—Ñ–æ—Ä–º—ã, –º–µ–Ω—å—à–∞—è —Ç–æ–ª—â–∏–Ω–∞, –≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–ª—å—á–µ–Ω–∏–µ –∏ –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ.

        –í –º–æ–¥–µ–ª—è—Ö —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è:
        - —Ç–æ–ª—â–∏–Ω–∞ –∫—É—Å–∫–∞;
        - —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å;
        - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–æ–ª–∞ / –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏—è;
        - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—É—à–∫–∏/—Ç–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏;
        - –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º—ã—à–µ—á–Ω–æ–π —Ç–∫–∞–Ω–∏ (—á–µ—Ä–µ–∑ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤).
        """
    )

    tab_model_zhaya, tab_model_formed = st.tabs(["–ú–æ–¥–µ–ª—å –¥–ª—è –∂–∞—è", "–ú–æ–¥–µ–ª—å –¥–ª—è —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π"])

    # -------------------------------------------------------
    # –û–ë–©–ê–Ø –§–£–ù–ö–¶–ò–Ø –ú–û–î–ï–õ–ò –í–õ–ê–ì–û–û–¢–î–ê–ß–ò
    # -------------------------------------------------------
    def drying_model(thickness_mm, dry_days, salt_days, w0, product_type: str):
        """
        –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –≤–ª–∞–≥–æ—É–¥–∞–ª–µ–Ω–∏—è:

            W(t) = W0 * exp( -k * t )

        –≥–¥–µ:
        - W0 ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –º–∞—Å—Å–æ–≤–∞—è –¥–æ–ª—è –≤–ª–∞–≥–∏, %;
        - t ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—É—à–∫–∏/—Å–æ–∑—Ä–µ–≤–∞–Ω–∏—è, —Å—É—Ç;
        - k ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏ (1/—Å—É—Ç).

        k –∑–∞–≤–∏—Å–∏—Ç –æ—Ç:
        - —Ç–æ–ª—â–∏–Ω—ã –∫—É—Å–∫–∞ (—á–µ–º —Ç–æ–ª—â–µ, —Ç–µ–º –º–µ–Ω—å—à–µ k);
        - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–æ–ª–∞/–º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Å–æ–ª —Å–Ω–∏–∂–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏);
        - —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ç–∞:
            * –∂–∞—è ‚Äî –±–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å;
            * —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è ‚Äî –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ–≥—Ä–µ–≤ –∏ —Å—É—à–∫–∞.
        """

        # –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è k –¥–ª—è –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞
        if product_type == "zhaya":
            # –∂–∞—è: –∫—Ä—É–ø–Ω—ã–π –∫—É—Å–æ–∫, —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è —Å—É—à–∫–∞
            k_base = 0.055
        else:
            # —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è: –±–∞—Ç–æ–Ω—ã, –±–æ–ª–µ–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
            k_base = 0.075

        # –í–ª–∏—è–Ω–∏–µ —Ç–æ–ª—â–∏–Ω—ã: –±–∞–∑–æ–≤–∞—è —Ç–æ–ª—â–∏–Ω–∞ 40 –º–º
        thickness_factor = 40.0 / float(thickness_mm)

        # –í–ª–∏—è–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–æ–ª–∞: 3 —Å—É—Ç–æ–∫ ‚Äî —É—Å–ª–æ–≤–Ω–∞—è –±–∞–∑–∞
        salt_factor = 1.0 / (1.0 + 0.03 * (float(salt_days) - 3.0))

        # –ò—Ç–æ–≥–æ–≤—ã–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç
        k_eff = k_base * thickness_factor * salt_factor

        # –†–∞—Å—á—ë—Ç –∫–æ–Ω–µ—á–Ω–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
        w_final = float(w0) * float(np.exp(-k_eff * float(dry_days)))

        # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (–Ω–µ –Ω–∏–∂–µ 15% –∏ –Ω–µ –≤—ã—à–µ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π)
        w_final = float(np.clip(w_final, 15.0, float(w0)))
        return w_final, k_eff

    # -------------------------------------------------------
    # 2.1 –ú–û–î–ï–õ–¨ –î–õ–Ø –ñ–ê–Ø
    # -------------------------------------------------------
    with tab_model_zhaya:
        st.subheader("–ú–æ–¥–µ–ª—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∂–∞—è")

        col1, col2, col3 = st.columns(3)

        with col1:
            thickness = st.slider("–¢–æ–ª—â–∏–Ω–∞ –∫—É—Å–∫–∞ –∂–∞—è, –º–º", 40, 120, 70)
            w0 = st.number_input("–°—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –∂–∞—è, %", 60.0, 80.0, 73.0)

        with col2:
            salt_days = st.slider("–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–æ–ª–∞, —Å—É—Ç", 1, 7, 3)
            dry_days = st.slider("–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—É—à–∫–∏, —Å—É—Ç", 5, 45, 20)

        with col3:
            st.markdown(
                "–î–ª—è –∂–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã:  \n"
                "- –±–æ–ª—å—à–∞—è —Ç–æ–ª—â–∏–Ω–∞ –∫—É—Å–∫–∞;  \n"
                "- –¥–ª–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Å–æ–ª;  \n"
                "- –º–µ–¥–ª–µ–Ω–Ω–∞—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è —Å—É—à–∫–∞ –∏ –∫–æ–ø—á–µ–Ω–∏–µ."
            )

        w_final, k_eff = drying_model(thickness, dry_days, salt_days, w0, "zhaya")

        st.markdown("#### üìä –†–∞—Å—á—ë—Ç –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–∂–∞—è)")
        colA, colB, colC = st.columns(3)
        colA.metric("–ö–æ–Ω–µ—á–Ω–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å, %", f"{w_final:.1f}")
        colB.metric("–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏ k, 1/—Å—É—Ç", f"{k_eff:.4f}")
        colC.metric("–ü–æ—Ç–µ—Ä—è –≤–ª–∞–≥–∏, –ø.–ø.", f"{w0 - w_final:.1f}")

        st.markdown("#### üìù –ü—Ä–∏–º–µ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–µ–π—Å–∞ (–∂–∞—è)")
        st.markdown(
            f"- –¢–æ–ª—â–∏–Ω–∞ –∫—É—Å–∫–∞: **{thickness} –º–º**  \n"
            f"- –ü–æ—Å–æ–ª: **{salt_days} —Å—É—Ç**  \n"
            f"- –°—É—à–∫–∞: **{dry_days} —Å—É—Ç**  \n"
            f"- –°—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å: **{w0:.1f}%**  \n\n"
            f"–ü–æ –º–æ–¥–µ–ª–∏ –ø–æ–ª—É—á–∞–µ–º –∫–æ–Ω–µ—á–Ω—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å ‚âà **{w_final:.1f}%** –∏ —É—Å—É—à–∫—É ‚âà **{w0 - w_final:.1f} –ø.–ø.** "
            f"–≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∏–ø–∏—á–Ω–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –∫–æ–ø—á—ë–Ω–æ–π –∂–∞—è –ø–æ—Å–ª–µ —Å—É—à–∫–∏."
        )

    # -------------------------------------------------------
    # 2.2 –ú–û–î–ï–õ–¨ –î–õ–Ø –§–û–†–ú–û–í–ê–ù–ù–´–• –ò–ó–î–ï–õ–ò–ô
    # -------------------------------------------------------
    with tab_model_formed:
        st.subheader("–ú–æ–¥–µ–ª—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π")

        col1, col2, col3 = st.columns(3)

        with col1:
            thickness_f = st.slider("–î–∏–∞–º–µ—Ç—Ä –±–∞—Ç–æ–Ω–∞ / —Ç–æ–ª—â–∏–Ω–∞, –º–º", 30, 80, 55)
            w0_f = st.number_input("–°—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π, %", 60.0, 80.0, 70.0)

        with col2:
            salt_days_f = st.slider("–ú–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ / —Å–æ–∑—Ä–µ–≤–∞–Ω–∏–µ, —Å—É—Ç", 1, 7, 3)
            dry_days_f = st.slider("–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—É—à–∫–∏/—Ç–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∏, —Å—É—Ç", 2, 20, 10)

        with col3:
            st.markdown(
                "–§–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è –æ–±—ã—á–Ω–æ:  \n"
                "- –∏–º–µ—é—Ç –º–µ–Ω—å—à—É—é —Ç–æ–ª—â–∏–Ω—É (–±–∞—Ç–æ–Ω—ã, —Ñ–æ—Ä–º—ã);  \n"
                "- –ø—Ä–æ—Ö–æ–¥—è—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–µ –≤–∞–∫—É—É–º–Ω–æ–µ –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ;  \n"
                "- –¥–æ—Å—Ç–∏–≥–∞—é—Ç —Ü–µ–ª–µ–≤–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∂–∞—è."
            )

        w_final_f, k_eff_f = drying_model(thickness_f, dry_days_f, salt_days_f, w0_f, "formed")

        st.markdown("#### üìä –†–∞—Å—á—ë—Ç –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (—Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è)")
        colA, colB, colC = st.columns(3)
        colA.metric("–ö–æ–Ω–µ—á–Ω–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å, %", f"{w_final_f:.1f}")
        colB.metric("–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏ k, 1/—Å—É—Ç", f"{k_eff_f:.4f}")
        colC.metric("–ü–æ—Ç–µ—Ä—è –≤–ª–∞–≥–∏, –ø.–ø.", f"{w0_f - w_final_f:.1f}")

        st.markdown("#### üìù –ü—Ä–∏–º–µ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–µ–π—Å–∞ (—Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ)")
        st.markdown(
            f"- –î–∏–∞–º–µ—Ç—Ä: **{thickness_f} –º–º**  \n"
            f"- –ü–æ—Å–æ–ª/–º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: **{salt_days_f} —Å—É—Ç**  \n"
            f"- –¢–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ + —Å—É—à–∫–∞: **{dry_days_f} —Å—É—Ç**  \n"
            f"- –°—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å: **{w0_f:.1f}%**  \n\n"
            f"–ü–æ –º–æ–¥–µ–ª–∏ –ø–æ–ª—É—á–∞–µ–º –∫–æ–Ω–µ—á–Ω—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å ‚âà **{w_final_f:.1f}%** –∏ —É—Å—É—à–∫—É ‚âà **{w0_f - w_final_f:.1f} –ø.–ø.** "
            f"–ó–∞ —Å—á—ë—Ç –º–µ–Ω—å—à–µ–π —Ç–æ–ª—â–∏–Ω—ã –∏ –±–æ–ª–µ–µ —Ä–∞–∑–≤–∏—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è —Å—É—à–∞—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –∂–∞—è."
        )

    # -------------------------------------------------------
    # 3. –ö–†–ê–¢–ö–ò–ô –í–´–í–û–î –ü–û –ú–û–î–ï–õ–Ø–ú
    # -------------------------------------------------------
    st.markdown("---")
    st.subheader("–í—ã–≤–æ–¥ –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –º–æ–¥–µ–ª–µ–π")

    st.markdown(
        """
        - –î–ª—è **–∂–∞—è** –º–æ–¥–µ–ª—å –æ—Ç—Ä–∞–∂–∞–µ—Ç –≤–ª–∏—è–Ω–∏–µ –±–æ–ª—å—à–æ–π —Ç–æ–ª—â–∏–Ω—ã –∫—É—Å–∫–∞, –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Å–æ–ª–∞ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ–π —Å—É—à–∫–∏,
          —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –º–µ–Ω—å—à–µ–º—É –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.
        - –î–ª—è **—Ñ–æ—Ä–º–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π** —Ç–∞ –∂–µ –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –∑–∞ —Å—á—ë—Ç –º–µ–Ω—å—à–µ–π —Ç–æ–ª—â–∏–Ω—ã, –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–≥–æ
          –º–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–ª–∞–≥–æ–æ—Ç–¥–∞—á–∏ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –≤–ª–∞–∂–Ω–æ—Å—Ç–∏.
        - –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–µ–π—Å—ã —Ä–∞—Å—á—ë—Ç–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ
          –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å (—Ç–æ–ª—â–∏–Ω–∞, –ø–æ—Å–æ–ª, —Å—É—à–∫–∞), –Ω–∞–±–ª—é–¥–∞—è –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–æ–Ω–µ—á–Ω—É—é –≤–ª–∞–∂–Ω–æ—Å—Ç—å –∏ —É—Å—É—à–∫—É.
        """
    )

    st.markdown("</div>", unsafe_allow_html=True)