# üìä –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ ¬´–ñ–∞—è¬ª ‚Äî –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéØ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–î–∏–∞–≥—Ä–∞–º–º—ã](#–¥–∏–∞–≥—Ä–∞–º–º—ã)
4. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
6. [–ú–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#–º–æ–¥—É–ª–∏-–∏-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
7. [API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#api-–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
8. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
9. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ IoT](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-iot)
10. [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](#—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

---

## üåü –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ ¬´–ñ–∞—è¬ª** ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Ü–∏—Ñ—Ä–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º –º—è—Å–Ω—ã—Ö –¥–µ–ª–∏–∫–∞—Ç–µ—Å–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

- üè≠ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º** ‚Äî –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ç –ø—Ä–∏–µ–º–∫–∏ —Å—ã—Ä—å—è –¥–æ —É–ø–∞–∫–æ–≤–∫–∏
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî ML-–º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- üî¨ **–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å** ‚Äî —É—á–µ—Ç –≤—Å–µ—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π (pH, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, Aw, –¢–ë–ß)
- üì° **IoT-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî –¥–∞—Ç—á–∏–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –≤–ª–∞–∂–Ω–æ—Å—Ç–∏, pH –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- üë• **–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞** ‚Äî —Ä–æ–ª–∏ (–æ–ø–µ—Ä–∞—Ç–æ—Ä, –∞–Ω–∞–ª–∏—Ç–∏–∫, –º–µ–Ω–µ–¥–∂–µ—Ä, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
- üåç **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** ‚Äî –†—É—Å—Å–∫–∏–π, English, “ö–∞–∑–∞“õ—à–∞

### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

```
Frontend:  Streamlit + Plotly
Backend:   Python 3.9+
Database:  Supabase (PostgreSQL)
IoT:       MQTT (Eclipse Mosquitto)
ML:        scikit-learn, statsmodels
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph TB
    subgraph "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"
        UI[Streamlit Web App]
    end
    
    subgraph "–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞"
        AUTH[–ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏]
        PROD[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º]
        LAB[–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è]
        ML[ML-–º–æ–¥–µ–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è]
        IOT[IoT-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö]
        REPORTS[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤]
    end
    
    subgraph "–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö"
        DB[(Supabase PostgreSQL)]
        CACHE[–ö—ç—à Streamlit]
    end
    
    subgraph "IoT Infrastructure"
        MQTT[MQTT Broker]
        SENSORS[IoT –î–∞—Ç—á–∏–∫–∏]
        SIMULATOR[–°–∏–º—É–ª—è—Ç–æ—Ä]
    end
    
    UI --> AUTH
    UI --> PROD
    UI --> LAB
    UI --> ML
    UI --> IOT
    UI --> REPORTS
    
    AUTH --> DB
    PROD --> DB
    LAB --> DB
    ML --> DB
    IOT --> DB
    REPORTS --> DB
    
    PROD --> CACHE
    LAB --> CACHE
    
    SENSORS --> MQTT
    SIMULATOR --> MQTT
    MQTT --> IOT
    IOT --> DB
```

---

## üìê –î–∏–∞–≥—Ä–∞–º–º—ã

### 1. Sequence Diagram: –ü—Ä–æ—Ü–µ—Å—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```mermaid
sequenceDiagram
    actor User
    participant UI as Streamlit UI
    participant Auth as auth.py
    participant Supabase as Supabase DB
    participant Session as Session State
    
    User->>UI: –í–≤–æ–¥ email + password
    UI->>Auth: authenticate_user(email, password)
    Auth->>Auth: hash_password(password)
    Auth->>Supabase: SELECT users WHERE email & password_hash
    
    alt –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
        Supabase-->>Auth: user_data
        Auth->>Supabase: INSERT INTO user_sessions (session_token)
        Auth->>Supabase: UPDATE users.last_login
        Auth->>Supabase: INSERT INTO activity_logs (login)
        Auth-->>UI: {authenticated: true, user_data, session_token}
        UI->>Session: st.session_state.user = user_data
        UI-->>User: ‚úÖ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
    else –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω / –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
        Supabase-->>Auth: []
        Auth->>Supabase: INSERT INTO activity_logs (failed_login)
        Auth-->>UI: {authenticated: false, error}
        UI-->>User: ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å
    end
```

### 2. Sequence Diagram: IoT Data Flow

```mermaid
sequenceDiagram
    participant Simulator as mqtt_client.py
    participant Broker as MQTT Broker
    participant IoT as IoT Module
    participant DB as Supabase DB
    participant Dashboard as Dashboard UI
    
    loop –ö–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        Simulator->>Simulator: generate_sensor_data()
        Simulator->>Broker: PUBLISH zhaya/sensors/data (JSON)
        Broker->>IoT: SUBSCRIBE message received
        IoT->>IoT: parse_sensor_data()
        IoT->>DB: INSERT INTO iot_sensor_data
        DB-->>IoT: ‚úÖ Success
    end
    
    Dashboard->>DB: fetch_iot_sensor_data(batch_id, limit)
    DB-->>Dashboard: sensor_data[]
    Dashboard->>Dashboard: render_charts()
    Dashboard-->>User: üìä Real-time graphs
    
    User->>Dashboard: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∞–∫—Ç—É–∞—Ç–æ—Ä—É
    Dashboard->>Broker: PUBLISH zhaya/actuators/commands
    Broker->>Simulator: –ö–æ–º–∞–Ω–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞
    Simulator->>DB: INSERT INTO actuator_logs
```

### 3. Class Diagram: –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

```mermaid
classDiagram
    class User {
        +str user_id
        +str email
        +str password_hash
        +str full_name
        +str role
        +str department
        +bool is_active
        +datetime created_at
        +datetime last_login
    }
    
    class ProductionBatch {
        +int batch_id
        +str product_type
        +float initial_weight
        +float final_weight
        +float target_concentration
        +datetime start_time
        +datetime end_time
        +str stage
    }
    
    class LabMeasurement {
        +int measurement_id
        +int batch_id
        +str parameter_name
        +float parameter_value
        +str parameter_unit
        +str lab_technician
        +datetime measurement_time
        +str notes
    }
    
    class IoTSensorData {
        +int sensor_id
        +int batch_id
        +str sensor_type
        +str sensor_location
        +float sensor_value
        +str sensor_unit
        +datetime time
    }
    
    class ActivityLog {
        +int log_id
        +str user_id
        +str action
        +str details
        +datetime timestamp
    }
    
    ProductionBatch "1" --> "*" LabMeasurement
    ProductionBatch "1" --> "*" IoTSensorData
    User "1" --> "*" ActivityLog
    User "1" --> "*" LabMeasurement : performs
```

### 4. State Diagram: –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–∞—Ä—Ç–∏–∏

```mermaid
stateDiagram-v2
    [*] --> –°–æ–∑–¥–∞–Ω–∞
    –°–æ–∑–¥–∞–Ω–∞ --> –ü—Ä–∏–µ–º–∫–∞: –ù–∞—á–∞–ª–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
    –ü—Ä–∏–µ–º–∫–∞ --> –ü–æ—Å–æ–ª: –°—ã—Ä—å–µ –ø—Ä–∏–Ω—è—Ç–æ
    –ü–æ—Å–æ–ª --> –¢–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞: –ü–æ—Å–æ–ª –∑–∞–≤–µ—Ä—à–µ–Ω (72—á)
    –¢–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ --> –°—É—à–∫–∞: T –≤–Ω—É—Ç—Ä–∏ ‚â•74¬∞C
    –°—É—à–∫–∞ --> –£–ø–∞–∫–æ–≤–∫–∞: –í–ª–∞–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
    –£–ø–∞–∫–æ–≤–∫–∞ --> –•—Ä–∞–Ω–µ–Ω–∏–µ: –í–∞–∫—É—É–º–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞
    –•—Ä–∞–Ω–µ–Ω–∏–µ --> –û—Ç–≥—Ä—É–∂–µ–Ω–∞: –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–π–¥–µ–Ω
    –û—Ç–≥—Ä—É–∂–µ–Ω–∞ --> [*]
    
    –ü—Ä–∏–µ–º–∫–∞ --> –û—Ç–±—Ä–∞–∫–æ–≤–∞–Ω–∞: –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
    –ü–æ—Å–æ–ª --> –û—Ç–±—Ä–∞–∫–æ–≤–∞–Ω–∞: pH –≤–Ω–µ –Ω–æ—Ä–º—ã
    –¢–µ—Ä–º–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ --> –û—Ç–±—Ä–∞–∫–æ–≤–∞–Ω–∞: –ù–µ–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ T¬∞
    –û—Ç–±—Ä–∞–∫–æ–≤–∞–Ω–∞ --> [*]
```

### 5. Component Diagram: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```mermaid
graph TB
    subgraph "app.py - Main Application"
        MAIN[Main Controller]
        AUTH_CHECK[Authentication Check]
        NAVIGATION[Navigation Router]
    end
    
    subgraph "Authentication Module"
        AUTH[auth.py]
        LOGIN[Login Page]
        LOGOUT[Logout]
        PERMISSIONS[Permission Check]
    end
    
    subgraph "Pages"
        HOME[home.py]
        PRODUCTION[production.py]
        REGRESSION[regression.py]
        PH_MODEL[ph_modeling.py]
        EXPERIMENTS[experiments.py]
        DASHBOARD[dashboard.py]
        IOT_MON[iot_monitoring.py]
        REPORTS[reports.py]
        ADMIN[admin.py]
    end
    
    subgraph "Data Layer"
        DB_MODULE[database_supabase.py]
        DATA_LOADER[data_loader.py]
    end
    
    subgraph "IoT Infrastructure"
        MQTT_CLIENT[mqtt_client.py]
        IOT_FUNCTIONS[IoT Helper Functions]
    end
    
    subgraph "UI Components"
        UI_MODULE[ui.py]
        TRANSLATIONS[Language Support]
        CHARTS[Chart Generators]
    end
    
    MAIN --> AUTH_CHECK
    AUTH_CHECK --> AUTH
    AUTH_CHECK --> NAVIGATION
    
    NAVIGATION --> HOME
    NAVIGATION --> PRODUCTION
    NAVIGATION --> REGRESSION
    NAVIGATION --> PH_MODEL
    NAVIGATION --> EXPERIMENTS
    NAVIGATION --> DASHBOARD
    NAVIGATION --> IOT_MON
    NAVIGATION --> REPORTS
    NAVIGATION --> ADMIN
    
    HOME --> DB_MODULE
    PRODUCTION --> DB_MODULE
    REGRESSION --> DATA_LOADER
    PH_MODEL --> DB_MODULE
    DASHBOARD --> DB_MODULE
    IOT_MON --> DB_MODULE
    IOT_MON --> MQTT_CLIENT
    REPORTS --> DB_MODULE
    ADMIN --> DB_MODULE
    
    MQTT_CLIENT --> IOT_FUNCTIONS
    IOT_FUNCTIONS --> DB_MODULE
    
    ALL_PAGES[All Pages] --> UI_MODULE
    UI_MODULE --> TRANSLATIONS
    UI_MODULE --> CHARTS
```

### 6. Data Flow Diagram: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π

```mermaid
flowchart TD
    START([–ù–∞—á–∞–ª–æ]) --> INPUT[–í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏—è]
    INPUT --> VALIDATE{–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö}
    
    VALIDATE -->|–ù–µ–≤–∞–ª–∏–¥–Ω–æ| ERROR1[–ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É]
    ERROR1 --> INPUT
    
    VALIDATE -->|–í–∞–ª–∏–¥–Ω–æ| CHECK_BATCH{–ü–∞—Ä—Ç–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?}
    CHECK_BATCH -->|–ù–µ—Ç| ERROR2[–û—à–∏–±–∫–∞: –ø–∞—Ä—Ç–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞]
    ERROR2 --> INPUT
    
    CHECK_BATCH -->|–î–∞| CHECK_PARAM{–ü–∞—Ä–∞–º–µ—Ç—Ä –≤ —Å–ø–∏—Å–∫–µ?}
    CHECK_PARAM -->|–ù–µ—Ç| ERROR3[–û—à–∏–±–∫–∞: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä]
    ERROR3 --> INPUT
    
    CHECK_PARAM -->|–î–∞| SAVE[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î]
    SAVE --> LOG[–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ]
    LOG --> CLEAR_CACHE[–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à]
    CLEAR_CACHE --> NOTIFY[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    NOTIFY --> UPDATE_UI[–û–±–Ω–æ–≤–∏—Ç—å UI]
    UPDATE_UI --> END([–ö–æ–Ω–µ—Ü])
```

### 7. Deployment Diagram: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```mermaid
graph TB
    subgraph "Client Layer"
        BROWSER[Web Browser]
        MOBILE[Mobile App Claude]
    end
    
    subgraph "Application Server"
        STREAMLIT[Streamlit App<br/>Port 8501]
        PYTHON[Python Runtime 3.9+]
    end
    
    subgraph "Database Layer"
        SUPABASE[Supabase Cloud<br/>PostgreSQL]
    end
    
    subgraph "IoT Infrastructure"
        MQTT_BROKER[Eclipse Mosquitto<br/>Port 1883]
        SENSORS_NET[IoT Sensors Network]
    end
    
    subgraph "External Services"
        SMTP[Email Server]
        STORAGE[Cloud Storage]
    end
    
    BROWSER --> STREAMLIT
    MOBILE --> STREAMLIT
    STREAMLIT --> PYTHON
    PYTHON --> SUPABASE
    PYTHON --> MQTT_BROKER
    MQTT_BROKER --> SENSORS_NET
    PYTHON --> SMTP
    PYTHON --> STORAGE
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
Python 3.9+
PostgreSQL (—á–µ—Ä–µ–∑ Supabase)
MQTT Broker (Eclipse Mosquitto)
```

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/your-org/zhaya-platform.git
cd zhaya-platform
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.streamlit/secrets.toml`:

```toml
[supabase]
url = "https://your-project.supabase.co"
key = "your-anon-key"
db_url = "postgresql://postgres:password@db.supabase.co:5432/postgres"
```

### 5. –ó–∞–ø—É—Å–∫ MQTT –±—Ä–æ–∫–µ—Ä–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
docker run -it -p 1883:1883 -p 9001:9001 eclipse-mosquitto
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ**
```bash
# Linux/Mac
sudo apt-get install mosquitto mosquitto-clients
sudo systemctl start mosquitto

# Windows
# –°–∫–∞—á–∞—Ç—å —Å https://mosquitto.org/download/
mosquitto -c mosquitto.conf
```

### 6. –ó–∞–ø—É—Å–∫ IoT —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
python mqtt_client.py
```

### 7. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
streamlit run app.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:8501`

### –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:
Email: admin@zhaya.kz
Password: Admin123

–û–ø–µ—Ä–∞—Ç–æ—Ä:
Email: operator@zhaya.kz
Password: Operator123
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zhaya-platform/
‚îú‚îÄ‚îÄ app.py                      # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ auth.py                     # –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ ui.py                       # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database_supabase.py        # –†–∞–±–æ—Ç–∞ —Å Supabase
‚îú‚îÄ‚îÄ data_loader.py              # –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ mqtt_client.py              # IoT —Å–∏–º—É–ª—è—Ç–æ—Ä –∏ MQTT –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ IOT.md                      # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ IoT
‚îÇ
‚îú‚îÄ‚îÄ .streamlit/
‚îÇ   ‚îî‚îÄ‚îÄ secrets.toml            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
‚îÇ
‚îú‚îÄ‚îÄ pages/                      # –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ home.py                 # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.py            # Dashboard —Å KPI
‚îÇ   ‚îú‚îÄ‚îÄ production.py           # –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ regression.py           # –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
‚îÇ   ‚îú‚îÄ‚îÄ ph_modeling.py          # pH –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ mathematical_models.py  # –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ seabuckthorn.py         # –ê–Ω–∞–ª–∏–∑ –æ–±–ª–µ–ø–∏—Ö–∏
‚îÇ   ‚îú‚îÄ‚îÄ experiments.py          # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ digital_safety.py       # –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ data_exploration.py     # –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ history_db.py           # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ iot_monitoring.py       # IoT –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ reports.py              # –û—Ç—á–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ supabase_test.py        # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase
‚îÇ
‚îú‚îÄ‚îÄ data/                       # –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (CSV/Excel)
‚îÇ   ‚îú‚îÄ‚îÄ meat_data.xlsx
‚îÇ   ‚îú‚îÄ‚îÄ opyty.xlsx
‚îÇ   ‚îî‚îÄ‚îÄ *.csv
‚îÇ
‚îî‚îÄ‚îÄ docs/                       # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ API.md
    ‚îú‚îÄ‚îÄ DATABASE_SCHEMA.md
    ‚îî‚îÄ‚îÄ IoT_SETUP.md
```

---

## üîß –ú–æ–¥—É–ª–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`auth.py`)

**–§—É–Ω–∫—Ü–∏–∏:**
- `authenticate_user(email, password)` ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- `check_permission(user_role, permission)` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- `logout_user()` ‚Äî –≤—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `log_activity(user_id, action, details)` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

**–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞:**

| –†–æ–ª—å          | –ü—Ä–∞–≤–∞                                                      |
|---------------|------------------------------------------------------------|
| **admin**     | –í—Å–µ –ø—Ä–∞–≤–∞ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã)   |
| **manager**   | –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º, –∏—Å—Ç–æ—Ä–∏—è       |
| **analyst**   | –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, –æ—Ç—á–µ—Ç–æ–≤, –∏—Å—Ç–æ—Ä–∏–∏                      |
| **operator**  | –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö, –±–∞–∑–æ–≤—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä dashboard                   |

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`database_supabase.py`)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
users (user_id, email, password_hash, full_name, role, department, is_active, created_at, last_login)

-- –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–∞—Ä—Ç–∏–∏
production_batches (batch_id, product_type, initial_weight, final_weight, target_sea_buckthorn_concentration, start_time, end_time, stage)

-- –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
lab_measurements (measurement_id, batch_id, parameter_name, parameter_value, parameter_unit, lab_technician, measurement_time, notes)

-- IoT –¥–∞–Ω–Ω—ã–µ
iot_sensor_data (sensor_id, batch_id, sensor_type, sensor_location, sensor_value, sensor_unit, time)

-- –ö–æ–º–∞–Ω–¥—ã –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º
actuator_logs (log_id, batch_id, actuator_name, set_value, previous_value, change_time, changed_by)

-- –õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
activity_logs (log_id, user_id, action, details, timestamp)
```

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `fetch_production_batches()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏–π
- `create_production_batch()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø–∞—Ä—Ç–∏–∏
- `add_lab_measurement()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- `fetch_iot_sensor_data()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö IoT
- `get_batch_details()` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–∏–∏

### 3. IoT —Å–∏—Å—Ç–µ–º–∞ (`mqtt_client.py`)

**–¢–∏–ø—ã –¥–∞—Ç—á–∏–∫–æ–≤:**
- `temperature` ‚Äî —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)
- `humidity` ‚Äî –≤–ª–∞–∂–Ω–æ—Å—Ç—å (%)
- `water_activity` ‚Äî –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤–æ–¥—ã (Aw)
- `ph` ‚Äî –∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å
- `orp` ‚Äî –æ–∫–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ-–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª (mV)
- `weight` ‚Äî –º–∞—Å—Å–∞ (–≥)
- `pressure` ‚Äî –¥–∞–≤–ª–µ–Ω–∏–µ (–ú–ü–∞)
- `air_flow` ‚Äî —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ–∑–¥—É—à–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (–º/—Å)

**–õ–æ–∫–∞—Ü–∏–∏ –¥–∞—Ç—á–∏–∫–æ–≤:**
- `product_mass` ‚Äî –≤ –º–∞—Å—Å–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- `chamber_air` ‚Äî –≤ –≤–æ–∑–¥—É—Ö–µ –∫–∞–º–µ—Ä—ã
- `press` ‚Äî –≤ –ø—Ä–µ—Å—Å–µ
- `brine_tank` ‚Äî –≤ –±–∞–∫–µ —Å —Ä–∞—Å—Å–æ–ª–æ–º

**–¢–æ–ø–∏–∫–∏ MQTT:**
```
zhaya/sensors/data       # –î–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–æ–≤ (–ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º)
zhaya/actuators/commands # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ø–æ–¥–ø–∏—Å–∫–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º)
zhaya/system/status      # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
```

### 4. –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è (`ui.py`)

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏:**
- üá∑üá∫ –†—É—Å—Å–∫–∏–π (`ru`)
- üá¨üáß English (`en`)
- üá∞üáø “ö–∞–∑–∞“õ—à–∞ (`kk`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from ui import get_text

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
title = get_text("menu_home", lang_choice)  # "–ì–ª–∞–≤–Ω–∞—è" / "Home" / "–ë–∞—Å—Ç—ã –±–µ—Ç"
```

---

## üì° API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### REST API (—á–µ—Ä–µ–∑ Supabase)

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ Supabase REST API:

```python
from database_supabase import init_supabase

supabase = init_supabase()

# SELECT
response = supabase.table('production_batches').select('*').execute()

# INSERT
response = supabase.table('lab_measurements').insert(data).execute()

# UPDATE
response = supabase.table('users').update({'is_active': False}).eq('user_id', user_id).execute()

# DELETE
response = supabase.table('activity_logs').delete().eq('log_id', log_id).execute()
```

### MQTT API

**–ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤:**
```python
import paho.mqtt.client as mqtt
import json

client = mqtt.Client()
client.connect("localhost", 1883)

sensor_data = {
    "batch_id": 1,
    "sensor_type": "temperature",
    "sensor_location": "product_mass",
    "sensor_value": 45.2,
    "sensor_unit": "¬∞C",
    "time": "2025-12-09T10:30:00Z"
}

client.publish("zhaya/sensors/data", json.dumps(sensor_data))
```

**–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –∞–∫—Ç—É–∞—Ç–æ—Ä—É:**
```python
command = {
    "batch_id": 1,
    "actuator_name": "T_set",
    "set_value": 47.0,
    "changed_by": "operator@zhaya.kz"
}

client.publish("zhaya/actuators/commands", json.dumps(command))
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π:** SHA-256
- **–°–µ—Å—Å–∏–∏:** –¢–æ–∫–µ–Ω—ã –¥–ª–∏–Ω–æ–π 32 –±–∞–π—Ç–∞ (URL-safe)
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏:** 8 —á–∞—Å–æ–≤
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `activity_logs`

### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
if check_permission(user_role, "view_reports"):
    show_reports()
else:
    st.error("‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω")
```

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

```python
# –í–∞–ª–∏–¥–∞—Ü–∏—è email
def validate_email(email: str) -> bool:
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    return re.match(pattern, email) is not None

# –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
def validate_password_strength(password: str) -> tuple[bool, str]:
    if len(password) < 8:
        return False, "–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤"
    if not any(c.isupper() for c in password):
        return False, "–•–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è –±—É–∫–≤–∞"
    if not any(c.isdigit() for c in password):
        return False, "–•–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞"
    return True, "OK"
```

### 4. –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Supabase ORM —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏:
```python
# –ë–µ–∑–æ–ø–∞—Å–Ω–æ
response = supabase.table('users').select('*').eq('email', user_email).execute()

# –û–ø–∞—Å–Ω–æ (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
query = f"SELECT * FROM users WHERE email = '{user_email}'"  # ‚ùå
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ IoT

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ IoT

```
IoT –î–∞—Ç—á–∏–∫–∏ ‚Üí MQTT Broker ‚Üí mqtt_client.py ‚Üí Supabase ‚Üí Dashboard
```

### –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (Real-time)

**–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞:**
```python
auto_refresh = st.checkbox("üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ", value=True)

if auto_refresh:
    refresh_interval = st.slider("–ò–Ω—Ç–µ—Ä–≤–∞–ª (—Å–µ–∫)", 1, 30, 5)
    time.sleep(refresh_interval)
    st.rerun()
```

### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ pH –¥–∏–∞–ø–∞–∑–æ–Ω–∞
if 5.1 <= ph_value <= 5.6:
    st.success("‚úÖ pH –≤ –Ω–æ—Ä–º–µ")
else:
    st.warning(f"‚ö†Ô∏è pH –≤–Ω–µ –Ω–æ—Ä–º—ã: {ph_value:.2f}")
    # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    send_alert(user_email, f"pH –ø–∞—Ä—Ç–∏–∏ {batch_id} = {ph_value}")
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º–∏

```python
# –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ UI
if st.button("–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É"):
    success = send_actuator_command(
        batch_id=1,
        actuator_name="T_set",
        set_value=45.0,
        changed_by=user_email
    )
    if success:
        st.success("‚úÖ –ö–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞")
```

---

## üë®‚Äçüíª –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `pages/my_page.py`:**
```python
import streamlit as st

def show_my_page(lang_choice):
    st.title("–ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞")
    st.write("–°–æ–¥–µ—Ä–∂–∏–º–æ–µ...")
```

**2. –î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç –≤ `app.py`:**
```python
from pages.my_page import show_my_page
```

**3. –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é:**
```python
# –í —Å–µ–∫—Ü–∏–∏ navigation
page_options.append(("üìÑ –ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞", "my_page"))

# –í —Å–µ–∫—Ü–∏–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞
elif page == "my_page":
    show_my_page(lang_choice)
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–í `ui.py` (—Å–ª–æ–≤–∞—Ä—å `LANG`):**
```python
LANG = {
    "ru": {
        "my_key": "–ú–æ—è —Å—Ç—Ä–æ–∫–∞",
    },
    "en": {
        "my_key": "My string",
    },
    "kk": {
        "my_key": "–ú–µ–Ω—ñ“£ –∂–æ–ª—ã–º",
    }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```python
from ui import get_text

text = get_text("my_key", lang_choice)
```

### –†–∞–±–æ—Ç–∞ —Å –∫—ç—à–µ–º

```python
import streamlit as st

# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞ 5 –º–∏–Ω—É—Ç)
@st.cache_data(ttl=300)
def fetch_heavy_data():
    # –¢—è–∂–µ–ª—ã–π –∑–∞–ø—Ä–æ—Å
    return data

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
from database_supabase import clear_all_caches
clear_all_caches()
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

```python
from auth import log_activity

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
log_activity(
    user_id=user["id"],
    action="create_batch",
    details=f"–°–æ–∑–¥–∞–Ω–∞ –ø–∞—Ä—Ç–∏—è ID: {batch_id}"
)
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (pytest)
pytest tests/

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
streamlit run app.py
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "üîß –¢–µ—Å—Ç Supabase"
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
- Email: support@zhaya.kz
- Telegram: @zhaya_support

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [API Reference](docs/API.md)
- [Database Schema](docs/DATABASE_SCHEMA.md)
- [IoT Setup Guide](IOT.md)

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏:**
- Lead Developer: [–í–∞—à–µ –∏–º—è]
- Project Manager: [–ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞]

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

```
MIT License

Copyright (c) 2025 Zhaya Platform

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software")...
```

---

## üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- **Streamlit** ‚Äî –∑–∞ –æ—Ç–ª–∏—á–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ UI
- **Supabase** ‚Äî –∑–∞ –º–æ—â–Ω—É—é backend-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É
- **Eclipse Mosquitto** ‚Äî –∑–∞ –Ω–∞–¥–µ–∂–Ω—ã–π MQTT –±—Ä–æ–∫–µ—Ä
- **Plotly** ‚Äî –∑–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 09.12.2025
